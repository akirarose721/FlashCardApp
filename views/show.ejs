<% include ./partials/header %>
<div class="show-header">
    <h1 class="show-title"><%= deck.subject %></h1>
    <h4 class="show-chapter">Chapter: <%=deck.chapter%> </h4>
    <p>Date: <%= deck.created.toDateString() %></p>
    <form id="delete" action="/decks/<%= deck._id%>?_method=DELETE" method="POST">
        <button class="mini ui red button">DELETE!</button>
    </form>
</div>

<% var count = 0 %> 
<div class="card-container">
    <% deck.cards.forEach(function(card){ %>
    <div>
        <div id="front" class="card front-of-card">
            <p>Front: <span id="front"><%= deck.cards[count].front %></span></p>
        </div>
        <div id="back" class="card back-of-card"> 
            <p>Back: <span id="back"><%= deck.cards[count].back %></span></p>
        </div>
        <div>
            <button name="prev">prev</button>
            <button  name="next">next</button>
        </div>
    </div>
    <% count ++ %>
    <% }); %>
</div>
<div id="add" class="mini ui blue basic button">
    <a href="/decks/<%=deck._id%>/edit">Add cards<a>
</div>

<script>

$('.front-of-card').click(function(){ 
    $( "div.front-of-card" ).toggleClass( "hide" );
    $("div.back-of-card").toggleClass("show")
});
$('.back-of-card').click(function(){ 
    $( "div.front-of-card" ).toggleClass( "hide" );
    $("div.back-of-card").toggleClass("show")
});

$(document).ready(function() {
     var divs = $('.card-container>div');
     var now = 0; // currently shown div
     divs.hide().first().show(); // hide all divs except first
     $("button[name=next]").click(function() {
         divs.eq(now).hide();
         now = (now + 1 < divs.length) ? now + 1 : 0;
         divs.eq(now).show(); // show next
     });
     $("button[name=prev]").click(function() {
         divs.eq(now).hide();
         now = (now > 0) ? now - 1 : divs.length - 1;
         divs.eq(now).show(); // show previous
     });
 });</script>

<% include ./partials/footer %>